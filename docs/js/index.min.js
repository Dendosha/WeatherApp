!function(){"use strict";const t="57a9686eda6f4fa3ae2124524240704",e=`https://api.weatherapi.com/v1/current.json?key=${t}&lang=ru&`,n=`https://api.weatherapi.com/v1//forecast.json?key=${t}&days=7&lang=ru&`;navigator.geolocation.getCurrentPosition((t=>{v(`${t.coords.latitude},${t.coords.longitude}`,!0)}));const o=document.forms["search-form"],i=document.querySelector(".weather-forecast"),r=document.getElementById("forecast-slider");let a={isDown:!1,snapRation:3,nextSlideIndex:1,currentX:0,childWidth:0};const s=document.getElementById("open-forecast-button"),c=s.parentElement,d=document.querySelector(".weather-current"),l=document.getElementById("current-weather-update-button"),u=document.getElementById("current-weather-city"),f=document.getElementById("current-weather-condition-icon"),m=document.getElementById("current-weather-condition-text"),p=document.getElementById("current-weather-temprature-value");function h(t){if(a.isDown){const t=r.children[a.nextSlideIndex],e=r.children[a.nextSlideIndex-1],n=e?.previousElementSibling,o=e.offsetLeft-r.offsetLeft-r.scrollLeft;t&&o<0&&Math.abs(o)>t.offsetWidth/a.snapRation?(t.scrollIntoView({inline:"center",behavior:"smooth"}),a.nextSlideIndex++):n&&o>0&&o>n.offsetWidth/a.snapRation?(n.scrollIntoView({inline:"center",behavior:"smooth"}),a.nextSlideIndex--):e.scrollIntoView({inline:"center",behavior:"smooth"}),a.isDown=!1,r.style.scrollBehavior="smooth",r.style.cursor="pointer"}}async function v(t,o){const i=await fetch(`${e}&q=${t}`);if(i.ok){const t=await i.json();c.classList.add("--visible"),d.classList.add("--visible"),u.innerText=t.location.name,f.src=t.current.condition.icon,m.innerText=t.current.condition.text,p.innerText=Math.round(t.current.temp_c)}if(o){const e=await fetch(`${n}&q=${t}`);if(e.ok){const t=await e.json();r.scrollTo({left:0,behavior:"smooth"}),a.nextSlideIndex=1,r.innerHTML="",t.forecast.forecastday.forEach((t=>{const e=new Date(t.date);let n=Intl.DateTimeFormat("ru-RU",{weekday:"long"}).format(e);n=n[0].toUpperCase()+n.slice(1),r.insertAdjacentHTML("beforeend",`\n\t\t\t\t\t<div class="weather-forecast__day-info forecast-day-info">\n\t\t\t\t\t\t<p class="forecast-day-info__weekday">${n}, ${Intl.DateTimeFormat("ru-RU").format(e)}</p>\n\t\t\t\t\t\t<img src="${t.day.condition.icon}" alt="Состояние" class="forecast-day-info__condition-icon condition-icon">\n\t\t\t\t\t\t<p class="forecast-day-info__temprature temprature">\n\t\t\t\t\t\t\t<span class="forecast-day-info__temprature-value">${Math.round(t.day.avgtemp_c)}</span>\n\t\t\t\t\t\t\t<span class="forecast-day-info__temprature-symbol">°C</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class="forecast-day-info__condition-text condition-text">${t.day.condition.text}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t`)}))}}}o.addEventListener("submit",(t=>{t.preventDefault(),v(o.elements["search-input"].value,!0),o.reset()})),s.addEventListener("click",(t=>{i.classList.toggle("--visible"),s.innerText="Показать прогноз на 7 дней"===s.innerText?s.innerText="Скрыть прогноз на 7 дней":s.innerText="Показать прогноз на 7 дней"})),l.addEventListener("click",(t=>{l.classList.add("--active"),v(u.innerText,!1)})),l.addEventListener("animationend",(t=>{l.classList.remove("--active")})),r.addEventListener("pointerdown",(function(t){"mouse"===t.pointerType&&(a.isDown=!0,a.currentX=t.clientX+r.scrollLeft,a.childWidth=r.children[0].offsetWidth,r.style.scrollBehavior="auto",r.style.cursor="grab")})),r.addEventListener("pointermove",(function(t){a.isDown&&r.scrollTo({left:a.currentX-t.clientX})})),r.addEventListener("pointerup",h),r.addEventListener("pointerout",h),r.addEventListener("wheel",(t=>{t.preventDefault()}))}();