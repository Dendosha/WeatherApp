!function(){"use strict";const t="57a9686eda6f4fa3ae2124524240704",e=`https://api.weatherapi.com/v1/current.json?key=${t}&lang=ru&`,n=`https://api.weatherapi.com/v1//forecast.json?key=${t}&days=7&lang=ru&`;navigator.geolocation.getCurrentPosition((t=>{v(`${t.coords.latitude},${t.coords.longitude}`,!0)}));const o=document.forms["search-form"],i=document.querySelector(".weather-forecast"),r=document.getElementById("forecast-slider"),a=document.getElementById("open-forecast-button"),c=a.parentElement,s=document.querySelector(".weather-current"),d=document.getElementById("current-weather-update-button"),l=document.getElementById("current-weather-city"),u=document.getElementById("current-weather-condition-icon"),f=document.getElementById("current-weather-condition-text"),m=document.getElementById("current-weather-temprature-value");o.addEventListener("submit",(t=>{t.preventDefault(),v(o.elements["search-input"].value,!0),o.reset()})),a.addEventListener("click",(t=>{i.classList.toggle("--visible"),a.innerText="Показать прогноз на неделю"===a.innerText?a.innerText="Скрыть прогноз на неделю":a.innerText="Показать прогноз на неделю"})),d.addEventListener("click",(t=>{d.classList.add("--active"),v(l.innerText,!1)})),d.addEventListener("animationend",(t=>{d.classList.remove("--active")}));let h={isDown:!1,nextSlideIndex:1,currentX:0,childWidth:0};function p(t){if(h.isDown){const t=r.children[h.nextSlideIndex],e=r.children[h.nextSlideIndex-1],n=e?.previousElementSibling,o=e.offsetLeft-r.offsetLeft-r.scrollLeft;t&&o<0&&Math.abs(o)>t.offsetWidth/2?(t.scrollIntoView({inline:"center",behavior:"smooth"}),h.nextSlideIndex++):n&&o>0&&o>n.offsetWidth/2?(n.scrollIntoView({inline:"center",behavior:"smooth"}),h.nextSlideIndex--):e.scrollIntoView({inline:"center",behavior:"smooth"}),h.isDown=!1,r.style.scrollBehavior="smooth",r.style.cursor="pointer"}}async function v(t,o){const i=await fetch(`${e}&q=${t}`);if(i.ok){const t=await i.json();c.classList.add("--visible"),s.classList.add("--visible"),l.innerText=t.location.name,u.src=t.current.condition.icon,f.innerText=t.current.condition.text,m.innerText=Math.round(t.current.temp_c)}if(o){const e=await fetch(`${n}&q=${t}`);if(e.ok){const t=await e.json(),n=Intl.DateTimeFormat("ru-RU",{weekday:"long"});r.scrollTo({left:0,behavior:"smooth"}),r.innerHTML="",t.forecast.forecastday.forEach((t=>{const e=new Date(t.date);let o=n.format(e);o=o[0].toUpperCase()+o.slice(1),r.insertAdjacentHTML("beforeend",`\n\t\t\t\t\t<div class="weather-forecast__day-info forecast-day-info">\n\t\t\t\t\t\t<p class="forecast-day-info__weekday">${o}</p>\n\t\t\t\t\t\t<img src="${t.day.condition.icon}" alt="Состояние" class="forecast-day-info__condition-icon condition-icon">\n\t\t\t\t\t\t<p class="forecast-day-info__temprature temprature">\n\t\t\t\t\t\t\t<span class="forecast-day-info__temprature-value">${Math.round(t.day.avgtemp_c)}</span>\n\t\t\t\t\t\t\t<span class="forecast-day-info__temprature-symbol">°C</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class="forecast-day-info__condition-text condition-text">${t.day.condition.text}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t`)}))}}}r.addEventListener("pointerdown",(function(t){"mouse"===t.pointerType&&(h.isDown=!0,h.currentX=t.clientX+r.scrollLeft,h.childWidth=r.children[0].offsetWidth,r.style.scrollBehavior="auto",r.style.cursor="grab")})),r.addEventListener("pointermove",(function(t){h.isDown&&r.scrollTo({left:h.currentX-t.clientX})})),r.addEventListener("pointerup",p),r.addEventListener("pointerout",p),r.addEventListener("wheel",(t=>{t.preventDefault()}))}();